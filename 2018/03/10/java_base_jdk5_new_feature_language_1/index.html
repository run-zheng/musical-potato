<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="zheng run(郑润)的个人博客."><meta name="keywords" content="java"><title>Java基础--Java SE 5增加的特性--语法篇（一） | ZhengRun's Blog</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Java基础--Java SE 5增加的特性--语法篇（一）</h1><a id="logo" href="/.">ZhengRun's Blog</a><p class="description">郑润的个人博客</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅RSS</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Java基础--Java SE 5增加的特性--语法篇（一）</h1><div class="post-meta"><a href="/2018/03/10/java_base_jdk5_new_feature_language_1/#comments" class="comment-count"></a><p><span class="date">Mar 10, 2018</span><span><a href="/categories/Java基础/" class="category">Java基础</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="为什么是Java-SE-5？"><a href="#为什么是Java-SE-5？" class="headerlink" title="为什么是Java SE 5？"></a><strong>为什么是Java SE 5？</strong></h2><p>目前已经到了JDK-8u74了，JDK7的主版本已经于2015年4月停止公开更新。</p>
<p>那为什么还要来说Java/JDK5呢？</p>
<p>Java SE在1.4（2002）趋于成熟，随着越来越多应用于开发企业应用，许多框架诞生于这个时期或走向成熟。<br>Java SE 5.0的发布（2004）在语法层面增加了很多特性，让开发更高效，代码更整洁。</p>
<ul>
<li>自动装箱/拆箱、泛型、注解、for循环增强、枚举、可变参数等新特性让你的小手指少敲了不少代码，可以写更优雅的实现;</li>
<li>API提供并发库大大减少并发编程的难度;</li>
<li>虚拟机层面改进了内存模型，增加虚拟机监控和管理相关的api和工具等等。</li>
</ul>
<p>但是，<font color="red">语法层面的改变对应于JVM却没有多大变化，只是编译器在编译字节码时偷偷做了手脚。</font><br>所以我们应该了解下到底编译器干了啥坏事，有助于写更合理的代码，少踩坑，掉陷阱里也得知道怎么掉的。</p>
<p>另外原因，目前从各种各样的项目代码看，其实多数开发人员常用的还是Java SE 5.0 的特性，甚至习惯用Java SE 1.4及以前的语法特性。<br>学java也有几年了，许多特性也知道个一二，但是要写下来，还是得查阅不少文章，很多东西欠缺完整性和系统性。<br>码农写文章（更合理说是整理资料）也是一个学习的过程。</p>
<p>学习一门语言，一旦实际应用于实际开发中，了解背后的原理和理念，深入了解语言的特点，有好处没坏处。</p>
<blockquote>
<p>注：javac XXXXX.java  编译命令<br>   javap -c  XXXXX    反编译命令<br>         -c  反编译<br>         -s  输出内部类型签名  需要看方法签名时  要加上这个参数<br>         -v  输出附加信息   会输出比较多信息  包括常量表  line number table 等信息， 但没有-s的输出内容  </p>
</blockquote>
<h2 id="一、自动装箱-拆箱"><a href="#一、自动装箱-拆箱" class="headerlink" title="一、自动装箱/拆箱"></a><strong>一、自动装箱/拆箱</strong></h2><h4 id="1、包装类型（存在于Java-1-5之前）"><a href="#1、包装类型（存在于Java-1-5之前）" class="headerlink" title="1、包装类型（存在于Java 1.5之前）"></a><strong>1、包装类型（存在于Java 1.5之前）</strong></h4><p>Java中，类型分成两大类，基本类型（Primitive Type）和引用类型(Reference Type)。基本类型是内定的，有确定的取值范围，值占有确定的内存空间。</p>
<p>有八大基本类型，分成两个浮点类型（float、double），五个整型(byte, short, int, long，char), 一个布尔型(boolean)。<br>没看错char也是整型，在语言规范中说明，char是一个16bit无符号整形，用来表示一个UTF-16编码的单元(在Java5中对应Unicode4.0，Java8中对应Unicode6.2)。</p>
<p>基本类型的值不是对象，最基本的对象(Object)方法(toString, hashCode, getClass, equals等)也不能调用。</p>
<p>为了把基本类型当引用类型来用，具备对象的特质，JDK中定义了各种基本类型相对应的包装类。<br>所谓装箱，就是将基本类型的值包装成(转换-conversion)对应的包装类型的对象，拆箱，就是讲包装类型的对象，转换成基本类型的值。</p>
<p>装箱和拆箱：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> j = <span class="keyword">new</span> Integer(<span class="number">250</span>);</span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th>基本类型</th>
<th>大小</th>
<th>数值范围</th>
<th>包装类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>boolean</td>
<td>—</td>
<td>true, false</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>byte</td>
<td>1字节(8bit)</td>
<td>-2^7 – 2^7-1</td>
<td>Byte</td>
<td>0</td>
</tr>
<tr>
<td>char</td>
<td>2字节(16bit)</td>
<td>\u0000–\uffff</td>
<td>Character</td>
<td>\u0000</td>
</tr>
<tr>
<td>short</td>
<td>2字节(16bit)</td>
<td>-2^15 – 2^15-1</td>
<td>Short</td>
<td>0</td>
</tr>
<tr>
<td>int</td>
<td>4字节(32bit)</td>
<td>-2^31 – 2^31-1</td>
<td>Integer</td>
<td>0</td>
</tr>
<tr>
<td>long</td>
<td>8字节(64bit)</td>
<td>-2^63 – 2^63-1</td>
<td>Long</td>
<td>0</td>
</tr>
<tr>
<td>float</td>
<td>4字节(32bit)</td>
<td>IEEE754</td>
<td>Float</td>
<td>0.0f</td>
</tr>
<tr>
<td>double</td>
<td>8字节(64bit)</td>
<td>IEEE754</td>
<td>Double</td>
<td>0.0d</td>
</tr>
</tbody>
</table>
<h4 id="2、自动装箱-拆箱背后"><a href="#2、自动装箱-拆箱背后" class="headerlink" title="2、自动装箱/拆箱背后"></a><strong>2、自动装箱/拆箱背后</strong></h4><p>前面说了，语法特性的改变并没改变JVM的实现方式，那么我们可以看看背后编译器到底干了啥事情。<br>下面代码和编译后的反编译结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">boxUnBox</span><span class="params">()</span></span>&#123;</span><br><span class="line">       Integer i = <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="keyword">new</span> Integer(<span class="number">250</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2018/03/10/java_base_jdk5_new_feature_language_1/behind_box_unbox.png" alt="enter description here"></p>
<p>反编译结果可以看到，以上代码实际等同于以下代码的编译结果：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">boxUnBox</span><span class="params">()</span></span>&#123;</span><br><span class="line">       Integer i = Integer. valueOf(<span class="number">100</span>);</span><br><span class="line">       </span><br><span class="line">       Integer t = <span class="keyword">new</span> Integer(<span class="number">250</span>);</span><br><span class="line">        <span class="keyword">int</span> j = t .intValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>八大基本类型的装箱操作都调用的是valueOf方法，拆箱操作调用各自赌赢的xxxValue()方法，有兴趣可以试试。</p>
<h4 id="3、注意-比较的陷阱"><a href="#3、注意-比较的陷阱" class="headerlink" title="3、注意==比较的陷阱"></a><strong>3、注意==比较的陷阱</strong></h4><p>在java中，计算类型的运算符，<br>先来看下比较的代码编译结果：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">boxUnBoxCMP</span><span class="params">()</span></span>&#123;             </span><br><span class="line">        Integer i = <span class="number">100</span>; </span><br><span class="line">        <span class="keyword">int</span> j = <span class="keyword">new</span> Integer(<span class="number">250</span>);</span><br><span class="line">        <span class="keyword">if</span>(j == i )&#123;&#125;</span><br><span class="line">	</span><br><span class="line">        Integer h = <span class="keyword">new</span> Integer(<span class="number">100</span>);</span><br><span class="line">        Integer k = <span class="keyword">new</span> Integer(<span class="number">100</span>);</span><br><span class="line">        <span class="keyword">if</span>(h == k )&#123;&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2018/03/10/java_base_jdk5_new_feature_language_1/box_unbox_compare_trap.png" alt="enter description here"></p>
<p>==第一个红框==是if(j == i ) 的反编译代码<br>从上面的反编译结果可以看出，包装类型的单目运算符计算其实是需要通过拆箱=&gt;计算=&gt;装箱实现的，<br>而双目运算符的运算也是需要将包装类型转换成基本类型，然后再参与运算。</p>
<p>但是，== 的比较要牢记它的本质，如果==比较两边都是引用类型，那么比较的是引用地址，如果其中一边是基本类型，那么非引用类型的值将转换成基本类型再做比较。<br>==第二个红框==中是引用比较，没有转换。</p>
<h4 id="4、Cache带来的坑"><a href="#4、Cache带来的坑" class="headerlink" title="4、Cache带来的坑"></a><strong>4、Cache带来的坑</strong></h4><p>我们看看自动装箱的valueOf的代码吧<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache. high)</span><br><span class="line">        <span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache. low)];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Integer(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>一眼就可以看到IntegerCache这个玩意，完整代码（JDK1.8的代码）如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerCache</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> low = -<span class="number">128</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> high;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// high value may be configured by property</span></span><br><span class="line">        <span class="keyword">int</span> h = <span class="number">127</span>;</span><br><span class="line">        <span class="comment">// 根据配置获取缓存最大值，最大值配置范围 127 &lt; h &lt; Integer.MAX_VALUE-129</span></span><br><span class="line">        String integerCacheHighPropValue =</span><br><span class="line">            sun.misc.VM.getSavedProperty(<span class="string">"java.lang.Integer.IntegerCache.high"</span>);</span><br><span class="line">        <span class="keyword">if</span> (integerCacheHighPropValue != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> i = parseInt( integerCacheHighPropValue);</span><br><span class="line">                i = Math. max(i, <span class="number">127</span>);</span><br><span class="line">                <span class="comment">// Maximum array size is Integer.MAX_VALUE</span></span><br><span class="line">                h = Math. min(i, Integer.MAX_VALUE - (- low) -<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span>( NumberFormatException nfe ) &#123;</span><br><span class="line">                <span class="comment">// If the property cannot be parsed into an int, ignore it.</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        high = h ;</span><br><span class="line">        cache = <span class="keyword">new</span> Integer[(high - low) + <span class="number">1</span>];<span class="comment">// 也许有人会疑惑为什么会有个+1，其实就是0这个数占了个坑</span></span><br><span class="line">        <span class="keyword">int</span> j = low;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line">            cache[k ] = <span class="keyword">new</span> Integer(j++);</span><br><span class="line">        <span class="comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span></span><br><span class="line">        <span class="keyword">assert</span> IntegerCache. high &gt;= <span class="number">127</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">IntegerCache</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>IntegerCache的意思就是将low到high的值先缓存起来，low恒定是-128， high默认是127，可以配置成127&lt;= high &lt;= Interger.MAX_VALUE-129<br>注意缓存的是Integer对象，所以是引用对象。既然是引用对象，那么==的比较就会有问题了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">trap</span><span class="params">()</span></span>&#123;</span><br><span class="line">       Integer i = <span class="number">100</span>;</span><br><span class="line">       Integer k = <span class="number">100</span>;</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">if</span>(i == k )&#123;System.out.println( <span class="string">"i == k"</span>);&#125;</span><br><span class="line">       </span><br><span class="line">       Integer j = <span class="number">500</span>;</span><br><span class="line">       Integer h = <span class="number">500</span>;</span><br><span class="line">        <span class="keyword">if</span>(j == h )&#123;System.out.println( <span class="string">"j == h"</span>);&#125;<span class="keyword">else</span> &#123; System.out.println(<span class="string">"j != h"</span> );&#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果是什么呢？<br>i == k<br>j != h</p>
<p>因为i和k都是从IntegerCache中取得的缓存对象，引用是一样的，j和h没有缓存，必须valueOf必须重新new一个Integer对象，所以引用是不等的。</p>
<p>类型Byte、Short、Long和Integer类似，只是没有可配置的最大缓存值，Byte所有值都被缓存了，所以不存在==的坑。<br>Character缓存的是0~127。<br>Float和Double没有缓冲，也没办法缓存。</p>
<h4 id="5、建议"><a href="#5、建议" class="headerlink" title="5、建议"></a><strong>5、建议</strong></h4><ul>
<li>不会参与运算的用包装， 比如数据库自增的记录ID，用Long类型</li>
<li>参与运算的，如果计算复杂，尽量先转成基本类型，计算后再转回对应的包装类对象；特别是频繁的单目运算符，如循环中的自增自减</li>
<li>参与比较，注意包装类的cache坑</li>
<li>记得所有集合中只能存对象类型，基本类型都是经过装箱/拆箱的</li>
</ul>
<p>举个不好的例子吧：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title">bad</span><span class="params">(List&lt;Integer&gt; list)</span></span>&#123;</span><br><span class="line">       Long sum = <span class="number">0L</span>;</span><br><span class="line">        <span class="keyword">for</span>(Integer i : list )&#123;</span><br><span class="line">               <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span> )&#123;</span><br><span class="line">                     sum += i;</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                     sum += i * <span class="number">2</span>;        </span><br><span class="line">              &#125;</span><br><span class="line">       &#125;</span><br><span class="line">        <span class="keyword">return</span> sum ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>有兴趣的童鞋可以反编译看下，类似于以下代码完成的事情：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title">badOrigin</span><span class="params">(List&lt;Integer&gt; list)</span></span>&#123;</span><br><span class="line">       Long sum = Long. valueOf(<span class="number">0L</span>);</span><br><span class="line">       Iterator&lt;Integer&gt; it = list.iterator();</span><br><span class="line">       Integer value = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">long</span> sumTmp = <span class="number">0L</span>;</span><br><span class="line">        <span class="keyword">while</span>(it .hasNext())&#123;</span><br><span class="line">               value = it.next();</span><br><span class="line">               <span class="keyword">if</span>(value .intValue() % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                     sumTmp = sum.longValue();</span><br><span class="line">                     sumTmp = sumTmp+ value.intValue();</span><br><span class="line">                     sum = Long. valueOf(sumTmp);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                     sumTmp = sum.longValue();</span><br><span class="line">                     sumTmp = sumTmp+ value.intValue()*<span class="number">2</span>;</span><br><span class="line">                     sum = Long. valueOf(sumTmp);</span><br><span class="line">              &#125;</span><br><span class="line">       &#125;</span><br><span class="line">        <span class="keyword">return</span> sum ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>按照建议来，可以改成以下代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title">good</span><span class="params">(List &lt;Integer&gt; list )</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">0L</span>;</span><br><span class="line">        <span class="keyword">int</span> value = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(Integer i : list )&#123;</span><br><span class="line">               value = i.intValue();</span><br><span class="line">               <span class="keyword">if</span>(value % <span class="number">2</span> == <span class="number">0</span> )&#123;</span><br><span class="line">                     sum += value;</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                     sum += value * <span class="number">2</span>;    </span><br><span class="line">              &#125;</span><br><span class="line">       &#125;</span><br><span class="line">        <span class="keyword">return</span> sum ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上反编译下看看字节码，是不是清爽多了^^</p>
<h2 id="二、for循环增强"><a href="#二、for循环增强" class="headerlink" title="二、for循环增强"></a><strong>二、for循环增强</strong></h2><p>for循环增强也是1.5里的一个语法糖，让大家写for循环更加便利，再加上IDE的代码模板，非常方便</p>
<h4 id="1、先看看List的for循环增强怎么写："><a href="#1、先看看List的for循环增强怎么写：" class="headerlink" title="1、先看看List的for循环增强怎么写："></a><strong>1、先看看List的for循环增强怎么写：</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">iteratorForeach</span><span class="params">()</span></span>&#123;</span><br><span class="line">       List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String str : list ) &#123;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>反编译结果如下，可以看出，其实就是调用Iterable接口的iterator方法，获得一个迭代器(Iterator), 利用迭代器进行遍历所有数据。<br>从这里也可以推出，只要实现Iterable接口的类型，都可以在for循环增强中使用：</p>
<p><img src="/2018/03/10/java_base_jdk5_new_feature_language_1/iteratable_foreach_inhance.png" alt="enter description here"></p>
<p>比如自己实现一个只有add方法，只能通过iterator遍历的List：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myListForeach</span><span class="params">()</span></span>&#123;</span><br><span class="line">       MyList&lt;String&gt; myList = <span class="keyword">new</span> MyList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String str : myList ) &#123;</span><br><span class="line">              </span><br><span class="line">       &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyList</span>&lt;<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> List&lt;V&gt; datas = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(V data )</span></span>&#123;</span><br><span class="line">               datas.add( data);</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Iterator&lt;V&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">               <span class="keyword">final</span> Iterator&lt;V&gt; it = datas .iterator();</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">new</span> Iterator&lt;V&gt;() &#123;</span><br><span class="line">                     <span class="meta">@Override</span></span><br><span class="line">                     <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                            <span class="keyword">return</span> it .hasNext();</span><br><span class="line">                    &#125;</span><br><span class="line">                     <span class="meta">@Override</span></span><br><span class="line">                     <span class="function"><span class="keyword">public</span> V <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                            <span class="keyword">return</span> it .next();</span><br><span class="line">                    &#125;</span><br><span class="line">              &#125;;</span><br><span class="line">       &#125;      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2、再看看数组类型的for循环增强怎么写："><a href="#2、再看看数组类型的for循环增强怎么写：" class="headerlink" title="2、再看看数组类型的for循环增强怎么写："></a><strong>2、再看看数组类型的for循环增强怎么写：</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">arrayForeach</span><span class="params">()</span></span>&#123;</span><br><span class="line">       String[] strs = <span class="keyword">new</span> String[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span> (String str : strs ) &#123;</span><br><span class="line">              </span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">       System. out.println();</span><br><span class="line">       String str = <span class="keyword">null</span> ;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strs .length ; i ++)&#123; <span class="comment">//传统for循环写法</span></span><br><span class="line">               str = strs[ i];</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>跟传统for循环相比，数组的for增强循环更加简洁，从反编译代码中也可以看出，用到的指令序列基本上是一样的。</p>
<p><img src="/2018/03/10/java_base_jdk5_new_feature_language_1/array_foreach_inhance.png" alt="enter description here"></p>
<h4 id="3、不适应的地方"><a href="#3、不适应的地方" class="headerlink" title="3、不适应的地方"></a><strong>3、不适应的地方</strong></h4><p>这么好的东西什么情况下用不了呢？ 主要是for增强循环中没能得到下标也没能得到iterator对象引用导致的。<br>第一种是数组或者List集合类型，需要用到下标的情况；<br>第二种是需要调用到Iterator接口的remove方法的情况；</p>
<h2 id="三、可变参数"><a href="#三、可变参数" class="headerlink" title="三、可变参数"></a><strong>三、可变参数</strong></h2><p>Java SE 5.0中增加了可变参数特性，对于以往用数组表示的参数可以调整到最后一个参数，作为可变参数定义，<br>调用方省去显示创建数组，可空数组可以直接可以省略：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs</span><span class="params">(String s, String... ss)</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    varargs(<span class="string">"aaa"</span> );</span><br><span class="line">    varargs(<span class="string">"aaa"</span> , <span class="string">"bbb"</span> );</span><br><span class="line">    varargs(<span class="string">"aaa"</span> , <span class="string">"bbb"</span> , <span class="string">"ccc"</span> , <span class="string">"ddd"</span> );</span><br><span class="line">    varargs(<span class="string">""</span>, <span class="keyword">null</span>) ;</span><br><span class="line">    varargs(<span class="string">"aaa"</span> , <span class="keyword">new</span> String[]&#123;<span class="string">"abc"</span>, <span class="string">"ccc"</span>, <span class="string">"ddd"</span> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可变参数背后编译器也是创建一个数组来传递参数的，可以方编译以上代码， varargs的方法签名中第二个参数就是一个string数组：</p>
<p><img src="/2018/03/10/java_base_jdk5_new_feature_language_1/behine_var_args.png" alt="enter description here"></p>
<p>==注意事项：==</p>
<ul>
<li>不能有多个可变参数，并且只能是最后一个参数；</li>
<li>因为可变参数是由数组实现的，调用方忽略可变参数时，可变参数为空数组；但是既然是数组，就可以设置成null，所以要注意空判断；</li>
<li>如果被调用的方法，既匹配了可变参数方法，有匹配了固定参数方法，固定参数方法将被调用；</li>
<li>尽量避免可变参数方法的重载（overload）:<ul>
<li>可变参数类型与前一个参数的类型一样时，与只有可变参数类型方法重载冲突，会导致调用不明确；</li>
<li>可变参数类型不同，但可变参数为空时，可以省略，或者设置成null，都会导致被调用方法不明确；</li>
<li>可变参数类型是基本类型或包装类型，重载会因为自动装箱/拆箱导致调用不明确</li>
</ul>
</li>
<li>override的方法参数类型和形式必须一致，不能将可变参数改成数组，虽然背后实现是一样的；</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**不能有多个可变参数，并且只能是最后一个参数**/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs10</span><span class="params">(Object ... objs, String abc)</span></span>&#123; <span class="comment">//编译出错</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs11</span><span class="params">(String abc, Object ... objs)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**因为可变参数是由数组实现的，调用方忽略可变参数时，可变参数为长度为0的数组；但是既然是数组，就可以设置成null，所以要注意null判断；**/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs2Test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    varargs2();</span><br><span class="line">    varargs2(<span class="keyword">null</span>); <span class="comment">//NullPointerException</span></span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs2</span><span class="params">(String...strs)</span></span>&#123;</span><br><span class="line">   <span class="comment">//strs 可能为null, 应该做 strs是否为空的判断</span></span><br><span class="line">   <span class="keyword">for</span> (String str : strs ) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="comment">/**如果被调用的方法，既匹配了可变参数方法，有匹配了固定参数方法，固定参数方法将被调用；**/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs3Test</span><span class="params">()</span></span>&#123;</span><br><span class="line">   varargs3(<span class="number">11</span>, <span class="number">22</span>); <span class="comment">//varargs30</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs3</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j )</span></span>&#123;</span><br><span class="line">   System. out.println(<span class="string">"varargs30"</span> );</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs3</span><span class="params">(<span class="keyword">int</span> i , <span class="keyword">int</span>... arr)</span></span>&#123;</span><br><span class="line">   System. out.println(<span class="string">"varargs31"</span> );</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="comment">/**可变参数类型与前一个参数的类型一样时，与只有可变参数类型方法重载冲突，会导致调用不明确；**/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs4Test</span><span class="params">()</span></span>&#123;</span><br><span class="line">   varargs4(<span class="string">"abc"</span> , <span class="string">"def"</span> , <span class="string">"ijk"</span> ); <span class="comment">//编译出错</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs4</span><span class="params">(String...strs)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs4</span><span class="params">(String str, String... strs)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="comment">/**可变参数类型不同，但可变参数为空时，可以省略，或者设置成null，都会导致被调用方法不明确；**/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs5Test</span><span class="params">()</span></span>&#123;</span><br><span class="line">   varargs5();   <span class="comment">//编译出错</span></span><br><span class="line">   varargs5(<span class="string">"abc"</span> , <span class="keyword">null</span>); <span class="comment">//编译出错</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs5</span><span class="params">(String str, String... strs)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs5</span><span class="params">(String str, Integer... datas)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="comment">/**可变参数类型是基本类型或包装类型，重载会因为自动装箱/拆箱导致调用不明确**/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs6Test</span><span class="params">()</span></span>&#123;</span><br><span class="line">   varargs6(<span class="string">"abc"</span> , <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">//编译出错</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs6</span><span class="params">(String str, <span class="keyword">int</span>... datas)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs6</span><span class="params">(String str, Integer... datas)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="comment">/**override的方法参数类型和形式必须一致，不能将可变参数改成数组，虽然背后实现是一样的**/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">varargs7Test</span><span class="params">()</span></span>&#123;</span><br><span class="line">   Sub sub = <span class="keyword">new</span> Sub();</span><br><span class="line">   </span><br><span class="line">   Base base = sub;</span><br><span class="line">   base.varargs7( <span class="string">"abc"</span>, <span class="string">"def"</span> );</span><br><span class="line">   base.varargs7();</span><br><span class="line">   </span><br><span class="line">   sub.varargs7();  <span class="comment">//编译错误</span></span><br><span class="line">   sub.varargs7(<span class="string">"abc"</span> , <span class="string">"def"</span> ); <span class="comment">//编译错误</span></span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">interface</span> <span class="title">Base</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">varargs7</span><span class="params">(String...strs )</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Sub</span> <span class="keyword">implements</span> <span class="title">Base</span></span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">varargs7</span><span class="params">(String[] strs)</span> </span>&#123;</span><br><span class="line">          System. out.println(<span class="string">"varargs7"</span> );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="四、StringBuilder和字符串-非1-5特性，顺便提一下而已"><a href="#四、StringBuilder和字符串-非1-5特性，顺便提一下而已" class="headerlink" title="四、StringBuilder和字符串+(非1.5特性，顺便提一下而已)"></a><strong>四、StringBuilder和字符串+(非1.5特性，顺便提一下而已)</strong></h2><p>JDK 5.0中增加了StringBuilder, 基本上和StringBuffer一样，但去掉了所有synchronized同步关键字。<br>性能上StringBuilder优于StringBuffer， 所以非并发情况下使用StringBuilder没商量。</p>
<p>Java中对象没有参与运算符运算的可能，也没有提供像C++那样重载运算符语法支持，不要被String的+操作欺骗了。<br>Java1.4中，字符串的+操作在编译器生成的字节码可以看到使用的是StringBuffer进行append，<br>Java5.0中，+操作改成StringBuilder的append:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sbTest</span><span class="params">(String s1, String s2)</span></span>&#123;</span><br><span class="line">       String str = s1 +s2 ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2018/03/10/java_base_jdk5_new_feature_language_1/stringbuilder_plus_append.png" alt="enter description here"></p>
</div><div class="tags"><a href="/tags/Java基础/">Java基础</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/03/10/eclipse_debug_java/" class="pre">工具使用-Eclipse调试Java常用功能介绍</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么是Java-SE-5？"><span class="toc-text">为什么是Java SE 5？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一、自动装箱-拆箱"><span class="toc-text">一、自动装箱/拆箱</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、包装类型（存在于Java-1-5之前）"><span class="toc-text">1、包装类型（存在于Java 1.5之前）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、自动装箱-拆箱背后"><span class="toc-text">2、自动装箱/拆箱背后</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3、注意-比较的陷阱"><span class="toc-text">3、注意==比较的陷阱</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4、Cache带来的坑"><span class="toc-text">4、Cache带来的坑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5、建议"><span class="toc-text">5、建议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、for循环增强"><span class="toc-text">二、for循环增强</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、先看看List的for循环增强怎么写："><span class="toc-text">1、先看看List的for循环增强怎么写：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、再看看数组类型的for循环增强怎么写："><span class="toc-text">2、再看看数组类型的for循环增强怎么写：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3、不适应的地方"><span class="toc-text">3、不适应的地方</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、可变参数"><span class="toc-text">三、可变参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、StringBuilder和字符串-非1-5特性，顺便提一下而已"><span class="toc-text">四、StringBuilder和字符串+(非1.5特性，顺便提一下而已)</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/11/06/maven-shade-plugin/">maven-shade-plugin介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/02/java-agent/">Java Agent</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/10/hello-world-embedding-jetty-servlet/">Hello World!——内嵌Jetty支持Servlet</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/27/hello-world-embedding-jetty/">Hello World！——内嵌Jetty</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/21/java-thread-create/">Java多线程的实现方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/26/create-jdk-docker-image/">Dockerfile构建jdk镜像和tomcat镜像</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/23/centos7-install-zookeeper/">zookeeper安装：单机模式、伪集群模式、集群模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/19/centos7-install-jdk-build-box/">Centos7安装jdk8并制作box镜像</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/16/use-hexo-gen-blog-deploy-github/">hexo安装、生成blog并deploy到github</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/16/github-multi-ssh-key/">github配置ssh及多ssh key问题处理</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hello-World系列/">Hello World系列</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java基础/">Java基础</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/github-博客/">github 博客</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/maven/">maven</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/zookeeper/">zookeeper</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/并发编程/">并发编程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/开发工具/">开发工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/折腾过程/">折腾过程</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/问题处理/">问题处理</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/Jetty/" style="font-size: 15px;">Jetty</a> <a href="/tags/vagrant/" style="font-size: 15px;">vagrant</a> <a href="/tags/virtualbox/" style="font-size: 15px;">virtualbox</a> <a href="/tags/vagrant-box/" style="font-size: 15px;">vagrant box</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/jdk镜像/" style="font-size: 15px;">jdk镜像</a> <a href="/tags/tomcat镜像/" style="font-size: 15px;">tomcat镜像</a> <a href="/tags/docker镜像/" style="font-size: 15px;">docker镜像</a> <a href="/tags/zookeeper/" style="font-size: 15px;">zookeeper</a> <a href="/tags/jdk8/" style="font-size: 15px;">jdk8</a> <a href="/tags/eclipse调试/" style="font-size: 15px;">eclipse调试</a> <a href="/tags/eclipse快捷键/" style="font-size: 15px;">eclipse快捷键</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/tags/ssh-key/" style="font-size: 15px;">ssh key</a> <a href="/tags/github-pages/" style="font-size: 15px;">github pages</a> <a href="/tags/Hello-World/" style="font-size: 15px;">Hello World</a> <a href="/tags/centos7/" style="font-size: 15px;">centos7</a> <a href="/tags/内嵌Jetty/" style="font-size: 15px;">内嵌Jetty</a> <a href="/tags/Servlet/" style="font-size: 15px;">Servlet</a> <a href="/tags/jsp/" style="font-size: 15px;">jsp</a> <a href="/tags/Java-Agent/" style="font-size: 15px;">Java Agent</a> <a href="/tags/Instrument/" style="font-size: 15px;">Instrument</a> <a href="/tags/并发编程/" style="font-size: 15px;">并发编程</a> <a href="/tags/java多线程/" style="font-size: 15px;">java多线程</a> <a href="/tags/Thread/" style="font-size: 15px;">Thread</a> <a href="/tags/FutureTask/" style="font-size: 15px;">FutureTask</a> <a href="/tags/Runnable/" style="font-size: 15px;">Runnable</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/maven-shade-plugin/" style="font-size: 15px;">maven-shade-plugin</a> <a href="/tags/Java基础/" style="font-size: 15px;">Java基础</a> <a href="/tags/OOM/" style="font-size: 15px;">OOM</a> <a href="/tags/virtual-vm/" style="font-size: 15px;">virtual vm</a> <a href="/tags/MAT/" style="font-size: 15px;">MAT</a> <a href="/tags/pinpoint/" style="font-size: 15px;">pinpoint</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">zheng run.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>